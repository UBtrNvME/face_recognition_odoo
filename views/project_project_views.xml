<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="edit_project_inherit" model="ir.ui.view">
            <field name="name">project.project.form.inherit</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.edit_project"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@name='button_box']" position="inside">
                    <field name="url_name" invisible="1"/>
                    <button class="oe_stat_button" name="website_button" icon="fa-globe">
                        <field name="url_field" widget="url" text_field="url_name" readonly="True"/>
                    </button>
                </xpath>
                <xpath expr="//header/button" position="replace">
                    <button name="send_approval" string="Подтвердить проект"
                            attrs="{'invisible': [('editable_by_user','=','no')]}" type="object"
                            class="oe_highlight oe_read_only"/>
                    <button name="send_reject" string="Отменить проект"
                            attrs="{'invisible': [('editable_by_user','=','no')]}" type="object"
                            class="oe_highlight oe_read_only"/>
                </xpath>
                <xpath expr="//div[@name='options_active']" position="replace">
                    <group>
                        <field name="label_tasks" string="Наименование для задач этого проекта"/>
                        <field name="stage_id"/>
                        <field name="realisation_stage"/>
                        <field name="description"/>
                        <field name="editable_by_user"/>
                        <field name="category"/>
                        <field name="region_id"/>
                        <field name="events_description"/>
                        <field name="invested_money"/>
                    </group>
                </xpath>
                <xpath expr="//field[@name='user_id']" position="after">
                    <field name="manager_id"/>
                </xpath>
                <xpath expr="//field[@name='user_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='privacy_visibility']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="string">Создатель</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="creator_email"/>
                    <field name="company_id"/>
                </xpath>
                <xpath expr="//field[@name='subtask_project_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//group[@name='misc']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//page[@name='settings']" position="attributes">
                    <attribute name="string">Настройки</attribute>
                </xpath>
                <xpath expr="//page[@name='settings']" position="after">
                    <page name="dates" string="Сроки реализации">
                        <group>
                            <field name="date_start"/>
                            <field name="date_end"/>
                            <field name="duration" widget="time_delta"/>
                        </group>
                    </page>
                    <page name="result" string="Результат проекта">
                        <group>
                            <field name="energy_type"/>
                            <field name="energy_efficiency"/>
                            <field name="result_description"/>
                            <field name="saved_money"/>
                            <field name="payback_period"/>
                        </group>
                    </page>
                </xpath>
                <xpath expr="//page[@name='project_stages']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//page[@name='emails']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="project_project_view_form_simplified_inherit" model="ir.ui.view">
            <field name="name">project.project.view.form.simplified.inherit</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.project_project_view_form_simplified"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="string">Название проекта</attribute>
                    <attribute name="placeholder"></attribute>
                    <attribute name="class"></attribute>
                </xpath>
                <xpath expr="//field[@name='name']" position="after">
                    <field name="partner_id" required="True" string="Создатель"/>
                    <field name="manager_id"/>
                    <field name="company_id"/>
                </xpath>
                <xpath expr="//label[@for='alias_name']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//div[@name='alias_def']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="view_project_project_filter_inherit" model="ir.ui.view">
            <field name="name">project.project.select.inherit</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.view_project_project_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_id']" position="after">
                    <field name="stage_id" string="Стадия"/>
                </xpath>
                <xpath expr="//filter[@name='Manager']" position="before">
                    <filter string="Стадия" name="stage_filter" context="{'group_by': 'stage_id'}"/>
                    <filter string="Регион" name="region_filter" context="{'group_by': 'region_id'}"/>
                    <filter string="Категория" name="category_filter" context="{'group_by': 'category'}"/>
                    <filter string="Инвестиции" name="invested_filter" context="{'group_by': 'invested_money', 'order':'invested_money desc'}"/>
                </xpath>
            </field>
        </record>

        <record id="view_project_kanban_inherit" model="ir.ui.view">
            <field name="name">project.project.kanban.inherit</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.view_project_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="invested_money"/>
                </xpath>
                <xpath expr="//div[@class='o_primary']" position="inside">
                    <span t-if="record.invested_money != False">
                        <br/>
                        Инвестиции:
                        <strong><t t-esc="record.invested_money.value"/> тг. </strong>
                    </span>
                </xpath>
            </field>
        </record>
    </data>
</odoo>